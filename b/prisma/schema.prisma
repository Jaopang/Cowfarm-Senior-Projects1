generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialActions"]
}

datasource db {
  provider = "mysql"
  url      = "mysql://root:OnlyGodknow@34.126.133.68:3306/farm"
}

model User {
  id        Int     @id @default(autoincrement())
  email     String  @unique
  name      String? @db.VarChar(150)
  password  String  @db.VarChar(150)
  lineId    String? @db.VarChar(150)
  userImage String? @db.LongText
  farm      Farm?
  // Admin         Admin[]
}
// model Admin {
//   id      Int    @id @default(autoincrement())
//   user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
//   userId    Int     
// }
model Farm {
  id        Int      @id @default(autoincrement())
  farmName  String   @db.VarChar(150)
  createdAt DateTime @default(now()) @updatedAt
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId    Int      @unique
  cows      Cow[]
}

model Cow {
  id         Int       @id @default(autoincrement())
  cowImage   String?   @db.LongText
  cowName    String    @db.VarChar(150)
  rfId       String?   @db.VarChar(150)
  dobCow     DateTime  @updatedAt
  sex        String    @db.VarChar(150)
  detail     String?   @db.VarChar(500)
  farm       Farm      @relation(fields: [farmId], references: [id] )
  farmId     Int
  cowEvents CowEvent[]
  cowVaccines CowVaccine[]
  }

model CowEvent {
  id    Int      @id @default(autoincrement())
  semen String   @db.VarChar(150)
  breed DateTime @default(now()) @updatedAt
  cow Cow @relation(fields: [cowId], references: [id] ,onDelete: Cascade)
  cowId Int
}

model CowVaccine {
  id             Int      @id @default(autoincrement())
  nameVaccineTH  String   @db.VarChar(150)
  nameVaccineEng String   @db.VarChar(150)
  vaccineId      String   @db.VarChar(150)
  createdAt      DateTime @default(now()) @updatedAt
  cow Cow @relation(fields: [cowId], references: [id],onDelete: Cascade)
  cowId Int
}
